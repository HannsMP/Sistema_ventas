(()=>{let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},t={".log"(t,s,i){let l=document.createElement("span");l.classList.add("code-line"),l.innerHTML='<span class="code-row"></span>',i?l.innerHTML+=t:l.innerHTML+=t.replace(/[&<>"']/g,t=>e[t]).replace(/^(\s\s)+/,e=>e.replace(/\s\s/g,'<span class="code-bracket">  </span>')).replace(/\[(\d{4}\/\d{2}\/\d{2} \d{2}:\d{2}:\d{2} (?:am|pm))\](\s)?/,e=>`<span class="bright-green">${e}</span>`).replace(/\[[A-Z|a-z]+\](\s)?/,e=>`<span class="bright-pink">${e}</span>`).replace(/[A-Z|a-z]+\:\s/,e=>`<span class="bright-orange weight-bold">${e}</span>`).replace(/(http|https):\/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|localhost)(:\d{1,5})?(\/\S+)?(\s)?/,e=>`<a class="bright-ligthblue style-italic" href="${e}">${e}</a>`).replace(/[A-Z]:\\[^:]+(\s)?/gi,e=>`<span class="bright-ligthblue style-italic">${e}</span>`).replace(/\s(\b\w+(\.\w+)+\b)(\s)?/g,e=>e.split(".").map((e,t)=>0==t?`<span class="bright-yellow">${e}</span>`:`<span class="bright-red">${e}</span>`).join('<span class="bright-grey weight-bold">.</span>')).replace(/\(/g,e=>'<span class="bright-orange weight-bold">(</span>').replace(/\)/g,e=>'<span class="bright-orange weight-bold">)</span>'),s&&l.classList.add(s);let a=l.querySelector(".code-row");return{codeLine:l,row:a}},".bash"(t,s,i){let l=document.createElement("span");l.classList.add("code-line"),l.innerHTML='<span class="code-row"></span>',i?l.innerHTML+=t:l.innerHTML+=t.replace(/[&<>"']/g,t=>e[t]).replace(/^(\s\s)+/,e=>e.replace(/\s\s/g,'<span class="code-bracket">  </span>')).replace(/(cd|dir|mkdir|rmdir|rename|move|start|del|mv|xdg-open|rm|ls)(\s|$)/g,(e,t,s)=>`<span class="bright-orange weight-bold">${t}</span>${" "===s?" ":""}`).replace(/(\d{2}\/\d{2}\/\d{4}  \d{2}:\d{2})(\s)?/,e=>`<span class="bright-green">${e}</span>`),s&&l.classList.add(s);let a=l.querySelector(".code-row");return{codeLine:l,row:a}}};class s{#a;#b="";#c;#d;#e;#f=[];#g=40;#h=0;constructor(e,s,i){if(this.#d=t[e],!this.#d||(this.#e=e,"DIV"!=s.nodeName)||(this.#a=s,this.#a.addEventListener("scroll",()=>{let{scrollTop:e,clientHeight:t,scrollHeight:i}=s;e+t<i||(this.#i(),this.#j())}),"string"!=typeof i))return;this.#b=i,this.#c=i.split("\n"),this.#i(),this.#j()}addStart(e,t,s){"string"==typeof e&&(e.split("\n").forEach(e=>{let{codeLine:i,row:l}=this.#d(e,t,s);this.#a.prepend(i),this.#f.unshift(l)}),this.#j(),this.#b+=e)}addEnd(e,t,s){if("string"!=typeof e)return;e.split("\n").forEach(e=>{let{codeLine:i,row:l}=this.#d(e,t,s);this.#a.append(i),this.#f.push(l)});let i=this.#f.length;this.#f[i-1].innerText=i,this.#a.scrollTop=this.#a.scrollHeight,this.#j(),this.#b+="\n"+e}empty(){this.#a.innerHTML="",this.#f=[]}#j(){for(let i=0;i<this.#f.length;i++)this.#f[i].innerText=i+1}#i(){let l=this.#h*this.#g,a;this.#c?.slice(l,l+this.#g)?.forEach(e=>{let{codeLine:t,row:s}=this.#d(e);this.#a.append(t),this.#f.push(s)}),this.#h++}download(e=`${Date.now()}${this.#e}`){let t=new Blob([this.#b],{type:"text/plain"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}}window.Code=s;class r{#k=0;#l=[20,0,0];#m=[];#n=[];#o=[];constructor(e,t){if("INPUT"!=e.nodeName)return;this.input=e,this.test=t,this.sug=document.createElement("div"),this.sug.className="input-suggestion",this.sug.addEventListener("click",t=>{let s=t.target;if(console.log(s),!s?.classList?.contains("option"))return;let i=e.value,l=i.slice(0,e.selectionStart);l=l.replace(/\S+$/,"");let a=i.slice(e.selectionStart);a=a.replace(/^\S+/,"");l+=s.textContent,e.value=l+a,e.setSelectionRange(l.length,l.length),s.classList.remove("selected"),this.sug.remove(),this.#k=0}),this.sug.addEventListener("scroll",()=>{let{scrollTop:e,clientHeight:t,scrollHeight:s}=this.sug;e+t<s||this.#i()}),e.addEventListener("keydown",t=>{let{ctrlKey:s,key:i,code:l}=t;if(s&&"Space"===l&&(t.preventDefault(),e.after(this.sug),this.#k=1),this.#k){if(t.stopPropagation(),"Escape"==i&&(this.sug.remove(),this.#k=0),"Enter"==i){let[a,r]=this.#o,n=e.value,h=n.slice(0,e.selectionStart);h=h.replace(/\S+$/,"");let o=n.slice(e.selectionStart);o=o.replace(/^\S+/,"");h+=this.#m[r].name,e.value=h+o,e.setSelectionRange(h.length,h.length),a.classList.remove("selected"),this.sug.remove(),this.#k=0}if("ArrowDown"==i){let[c,d]=this.#o;d++;let p=this.#m[d];if(!p)return;p.box.classList.add("selected"),c.classList.remove("selected"),this.#o[0]=p.box,this.#o[1]++,this.sug.scrollTop=this.sug.scrollHeight-(this.#m.length-d)*20}if("ArrowUp"==i){let[g,u]=this.#o;u--;let m=this.#m[u];if(!m)return;m.box.classList.add("selected"),g.classList.remove("selected"),this.#o[0]=m.box,this.#o[1]--,this.sug.scrollTop=this.sug.scrollHeight-(this.#m.length-u)*20}}}),e.addEventListener("input",t=>{let s=e.value.slice(0,e.selectionStart);this.test?.test(s)?(e.after(this.sug),this.#k=1):(this.sug.remove(),this.#k=0);let i=5+6.59*s.length;this.#k&&(this.sug.style.left=i+"px");let l=/\S+$/.exec(s);if(l&&""!=l[0]){if(this.#p(l[0]),!this.#m.length)return this.sug.remove(),this.#k=0}else this.#m=this.#n;this.#q()}),e.addEventListener("focusout",e=>{setTimeout(()=>{this.sug.remove(),this.#k=0},100)})}push(e){e=e?.map(e=>{let t=document.createElement("div");t.textContent=e,t.className="option";let s=e.toLowerCase();return{name:e,lower:s,box:t}}),this.#n=this.#r(e)}#p(n){n=n.toLowerCase(),this.#m=this.#n.filter(({lower:e})=>e.includes(n))}#r(h){return h.sort(({name:e},{name:t})=>e<t?-1:e>t?1:0)}#q(){this.sug.innerHTML="",this.#l[1]=0,this.#l[2]=this.#m.length,this.#i();let{box:o}=this.#m[0];o.classList.add("selected"),this.#o=[o,0]}#i(){let c=this.#l[0]*this.#l[1],d=c+this.#l[0];if(this.#l[2]<c)return;let p=this.#m.slice(c,d);this.sug.append(...p.map(e=>(e.box.classList.remove("selected"),e.box))),this.#l[1]++}}window.Suggestion=r,window.inputBash=function(e){e.previousElementSibling.innerHTML=e.value.replace(/(cd|dir|mkdir|rmdir|rename|move|start|del|mv|xdg-open|rm|ls)(\s+)/g,(e,t,s)=>`<span class="bright-orange weight-bold">${t}</span>${"-".repeat(s?.length||0)}`).replace(/(\|\||&&)(\s+)/g,(e,t,s)=>`<span class="bright-ligthblue weight-bold">${t}</span>${"-".repeat(s?.length||0)}`).replace(/(\!)(\s+)/g,(e,t,s)=>`<span class="bright-red weight-bold">${t}</span>${"-".repeat(s?.length||0)}`)}})();