class Calendar extends EventListener{optionMonth=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];data=[];matriz=[];#a;#b;#c;#d;#e;#f=[];constructor(t,e=["L","M","X","J","V","S","D"]){super(),this.head=e,this.box=t,t.classList.add("calendar-box"),this.box.innerHTML='<div class="calendar-dashboard"><sapn class="tittle"><span class="month"></span> de<span class="year"></span></sapn><div class="select"><a class="prev"><i class="bx bx-chevron-left"></i></a><a class="next"><i class="bx bx-chevron-right"</i></a></div></div><table class="calendar-table"></table>',this.month=t.querySelector(".month"),this.year=t.querySelector(".year"),this.prev=t.querySelector(".prev"),this.next=t.querySelector(".next"),this.table=t.querySelector(".calendar-table"),this.table.innerHTML="<thead></thead><tbody></tbody>",this.thead=this.table.querySelector("thead"),this.tbody=this.table.querySelector("tbody"),this.today=new Date,this.#a=this.today.getDate(),this.#c=this.#e=this.today.getMonth()+1,this.#b=this.#d=this.today.getFullYear(),this.#g(),this.#h();let s=t=>{this.#e--,0==this.#e&&(this.#d--,this.#e=12),t&&this.emit("prev",{year:this.#d,mounth:this.#e}),this.#h()};this.prev.addEventListener("click",s);let a=t=>{this.#e++,13==this.#e&&(this.#d++,this.#e=1),t&&this.emit("next",{year:this.#d,mounth:this.#e}),this.#h()};this.next.addEventListener("click",a),this.tbody.addEventListener("click",t=>{let e=t.target;if(e?.nodeName!="TD")return;this.#f[0]?.classList?.remove("select"),this.#f[0]=e;let r=e.dataTime;return(this.#f[1]=r,e.classList.add("select"),this.emit("click",{cell:e,date:e.dataDate}),e.dataset?.y==0&&e.classList.contains("out"))?s(!1):(e.dataset?.y==5||e.dataset?.y==4)&&e.classList.contains("out")?a(!1):void 0})}setDate(t){let e=t instanceof Date?t:new Date(t);this.#e=e.getMonth()+1,this.#d=e.getFullYear(),this.#f[1]=`${this.#d}/${this.#e}/${e.getDate()}`,this.#h()}#g(){let t="<tr>";this.head.forEach((e,s)=>{t+=`<th>${e}</t>`}),t+="</tr>",this.thead.innerHTML=t;for(let e=0;e<6;e++){let s=document.createElement("tr"),a=[];for(let r=0;r<7;r++){let i=document.createElement("td");i.setAttribute("data-y",e),a.push(i)}s.append(...a),this.matriz.push(a),this.tbody.append(s)}}#h(){let n=new Date(`${this.#d}/${this.#e}/1`),h=n.getDay();h=0==h?7:h;let o=new Date(n-864e5*(h-1)).getTime();this.month.textContent=this.optionMonth[this.#e-1],this.year.textContent=this.#d;for(let l=0;l<6;l++){let c=[];for(let d=0;d<7;d++){let u=this.matriz[l][d];u.classList.remove("now","out","select");let y=7*l+d,M=u.dataDate=new Date(o+864e5*y),b=u.textContent=M.getDate(),m=M.getMonth()+1,p=u.dataTime=`${this.#d}/${m}/${b}`;p==`${this.#b}/${this.#c}/${this.#a}`?u.classList.add("now"):m!=this.#e&&u.classList.add("out"),this.#f[1]==p&&(this.#f[0]=u,u.classList.add("select"))}this.data[l]=c}}}