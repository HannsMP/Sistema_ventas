class Tables{constructor(a){this.i=$(a),this.table=this.i[0]}init(a,e="tb_search"){let t={data:[],pageLength:50,rowId:"id",autoWidth:!1,ordering:!0,paging:!0,searching:!0,searchDelay:200,deferRender:!0,processing:!0,language:{decimal:"",emptyTable:"No hay datos disponibles en la tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ entradas",infoEmpty:"Mostrando 0 a 0 de 0 entradas",infoFiltered:"(filtrado de _MAX_ entradas totales)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ entradas",loadingRecords:"Cargando...",processing:"Cargando datos, por favor espera...",search:"Buscar:",zeroRecords:"No se encontraron registros coincidentes",select:{rows:{0:"Haga clic en una fila para seleccionarla",1:"1 Fila seleccionada",_:"%d Filas seleccionadas"}},paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": activar para ordenar la columna ascendente",sortDescending:": activar para ordenar la columna descendente",orderable:"Ordenar por esta columna",orderableReverse:"Ordenar esta columna en orden inverso"},searchPanes:{title:{_:"Filtros seleccionados - %d",0:"No hay filtros seleccionados",1:"Un filtro seleccionado"}}},buttons:[{extend:"copy",text:"Copiar"},{extend:"csv",text:"CSV"},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Imprimir"}]};if(a.data&&(t.data=a.data),a.pageLength&&(t.pageLength=a.pageLength),a.select&&(t.select=a.select),a.order&&(t.order=a.order),a.columns&&(t.columns=a.columns),a.columnDefs&&(t.columnDefs=a.columnDefs),a.serverSide&&(t.serverSide=a.serverSide),a.ajax){if("function"==typeof a.ajax){let s=a.ajax;a.ajax=(a,e)=>{$(".dt-processing").css("display","flex"),s(a,a=>{e(a),$(".dt-processing").css("display","none")})}}t.ajax=a.ajax}if(e){let r=new URL(window.location.href);if(r.searchParams.has(e)){let o=r.searchParams.get(e);t.search={search:o}}}if(this.config=t,this.datatable=this.i.DataTable(t),e){let d;this.datatable.on("search",(a,t)=>(clearTimeout(d),d=setTimeout(()=>{let a=new URL(window.location.href),s=t?.oPreviousSearch?.search;s?a.searchParams.has(e)?a.searchParams.set(e,s):a.searchParams.append(e,s):a.searchParams.delete(e),history.pushState({},"",a.toString())},200),t?.oPreviousSearch?.search))}}selected(){return this.datatable.row({selected:!0}).data()?.id}selecteds(){return this.datatable.rows({selected:!0}).data().toArray().map(a=>a.id)}data(a){this.datatable.clear(),this.add(...a)}add(...a){a.forEach(a=>this.datatable.row.add(a)),this.datatable.draw()}remove(...a){a.forEach(a=>this.datatable.row(a).remove()),this.datatable.draw(!1)}toggle(a,e){this.datatable.row(a).nodes().to$().toggleClass(e)}update(a,e){let t=this.datatable.row(a),s=t.data();return t.data({...s,...e}).draw(!1),s}get(a){return this.datatable.row(a).data()}search(a,...e){this.datatable.search(a,...e).draw()}buttons(a=".tables-utils .download"){this.datatable.buttons().container().appendTo(a)}toggleColumn(a,e){this.datatable.column(a).visible(e)}toggleSelect(a,e=this.config?.select?.style||"single"){this.datatable.select.style(a?e:"api"),a||this.datatable.rows().deselect()}draw(){let a=this.datatable.page();this.datatable.page(a).draw(!1)}}